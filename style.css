/* ===== EMERGENCY LAYER FIX (prevents background covering UI) ===== */
#premiumBg{ z-index:0 !important; pointer-events:none !important; }
#premiumBg *{ pointer-events:none !important; }
#fxBurstCanvas, .fx-burst-canvas{ pointer-events:none !important; }
#root{ position:relative !important; z-index:2 !important; }
.toast-container{ z-index:999999 !important; pointer-events:none !important; }

/* ---------------------------
   YOUR ORIGINAL CSS
---------------------------- */
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #0d1117;
    color: white;
}

#name-screen, #waiting-screen, #chat-screen {
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

#nameInput, #messageInput {
    padding: 10px;
    width: 250px;
    border-radius: 5px;
    border: none;
    margin-top: 10px;
}

button {
    padding: 10px 20px;
    margin-top: 10px;
    border: none;
    border-radius: 5px;
    background: #238636;
    color: white;
    cursor: pointer;
}

#messages {
    width: 100%;
    height: 80vh;
    overflow-y: auto;
    padding: 10px;
}

#input-area {
    display: flex;
    width: 100%;
    padding: 10px;
    background: #161b22;
}

#input-area input {
    flex: 1;
    margin-right: 10px;
}

/* ---------------------------
   NEW CHAT + REPLIES + THEME CSS
---------------------------- */

/* Chat Layout */
#chat-screen {
    height: 100vh;
    display: flex;
    flex-direction: column;
    transition: background 0.3s, color 0.3s;
}

/* Header */
.chat-header {
    width: 100%;
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid rgba(255,255,255,0.15);
}

.chat-header h1 {
    margin: 0;
    font-size: 1.4rem;
}

.subtitle {
    margin: 0;
    font-size: 0.85rem;
    opacity: 0.7;
}

.chat-controls button {
    margin-left: 10px;
    padding: 6px 10px;
    border-radius: 6px;
}

/* Messages */
.messages {
    flex: 1;
    width: 100%;
    overflow-y: auto;
    padding: 15px;
}

.msg {
    margin-bottom: 12px;
    padding: 10px 14px;
    border-radius: 8px;
    background: rgba(255,255,255,0.1);
    max-width: 80%;
}

.msg-top {
    font-size: 0.85rem;
    opacity: 0.8;
    margin-bottom: 4px;
}

.msg-text {
    font-size: 1rem;
    line-height: 1.3rem;
}

.msg-actions {
    margin-top: 6px;
}

.msg-actions button {
    margin-right: 6px;
    padding: 4px 8px;
    font-size: 0.75rem;
    border-radius: 5px;
}

/* Input Bar */
#chat-input {
    display: flex;
    width: 100%;
    padding: 12px;
    gap: 10px;
    background: #161b22;
}

#chat-input input {
    flex: 1;
    padding: 10px;
    border-radius: 6px;
    border: none;
    outline: none;
}

#chat-input button {
    padding: 10px 14px;
    border-radius: 6px;
}

/* Replies Drawer (C2 Style) */
.replies {
    width: 100%;
    padding: 12px 15px;
    max-height: 40vh;
    overflow-y: auto;
    background: rgba(0,0,0,0.15);
    border-top: 1px solid rgba(255,255,255,0.2);
}

.replies.hidden {
    display: none;
}

.replies-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.replies-header button {
    padding: 4px 8px;
    border-radius: 5px;
}

.replies-list {
    max-height: 25vh;
    overflow-y: auto;
    margin-bottom: 10px;
}

.reply-msg {
    margin-bottom: 10px;
    padding: 8px 12px;
    border-radius: 6px;
    background: rgba(255,255,255,0.1);
}

.reply-input {
    display: flex;
    gap: 8px;
}

.reply-input input {
    flex: 1;
    padding: 8px;
    border-radius: 6px;
    border: none;
    outline: none;
}

.reply-input button {
    padding: 8px 12px;
    border-radius: 6px;
}

/* Day Mode */
#chat-screen.day {
    background: #f5f5f5;
    color: #000;
}

#chat-screen.day .msg,
#chat-screen.day .reply-msg {
    background: #e0e0e0;
}

#chat-screen.day .replies {
    background: #d9d9d9;
}

#chat-screen.day #chat-input input {
    background: #fff;
}

#chat-screen.day #chat-input button {
    background: #ddd;
}

/* Night Mode */
#chat-screen.night {
    background: #0f0f0f;
    color: #fff;
}

#chat-screen.night .msg,
#chat-screen.night .reply-msg {
    background: #1c1c1c;
}

#chat-screen.night .replies {
    background: #151515;
}

#chat-screen.night #chat-input input {
    background: #222;
    color: #fff;
}

#chat-screen.night #chat-input button {
    background: #333;
    color: #fff;
}
/* =========================
   CLIENT CHAT SCALING FIX
   Paste at bottom of style.css
   ========================= */

/* Kill the outer page scroll while in chat */
html, body {
  height: 100%;
}

/* Your app renders screens into #root (from index.html) */
#root {
  min-height: 100vh;
}

/* Chat screen should consume full viewport height */
#screen-chat {
  height: 100vh;
}

/* Make the chat container a proper full-height flex layout */
#chat-screen {
  height: 100vh;
  max-width: 1100px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  overflow: hidden;              /* key: prevents page scroll */
  border-radius: 14px;
}

/* Header stays at top */
.chat-header {
  flex: 0 0 auto;
}

/* Announcements should NOT float center â€” make it a full-width bar */
#announcementsBox {
  flex: 0 0 auto;
  margin: 10px 12px 0 12px;
  border-radius: 12px;
  padding: 10px 12px;
  background: rgba(0,0,0,0.25);
  border: 1px solid rgba(255,255,255,0.08);
}

/* Prevent announcements list from taking too much height */
#announcementsList {
  max-height: 90px;
  overflow-y: auto;
  margin-top: 8px;
}

/* Messages should be the ONLY scrollable area */
#messages.messages {
  flex: 1 1 auto;
  overflow-y: auto;
  margin: 10px 12px;
  padding: 12px;
  border-radius: 12px;
  background: rgba(0,0,0,0.12);
  border: 1px solid rgba(255,255,255,0.06);
  scroll-behavior: smooth;
}

/* Keep typing indicator above input */
#typingIndicator {
  flex: 0 0 auto;
  margin: 0 12px 8px 12px !important;
  opacity: 0.85;
}

/* Input stays at bottom INSIDE the chat, not page */
#chat-input {
  flex: 0 0 auto;
  margin: 0;
  padding: 10px 12px 14px 12px;
  display: flex;
  gap: 10px;
  align-items: center;
  background: rgba(0,0,0,0.35);
  border-top: 1px solid rgba(255,255,255,0.06);
}

/* Input + send button sizing */
#msgInput {
  flex: 1;
  min-width: 0;
  padding: 12px 14px;
  border-radius: 12px;
}

#sendBtn {
  padding: 11px 16px;
  border-radius: 12px;
}

/* =========================
   Smooth Animations
   ========================= */
.msg, .reply-msg {
  animation: msgIn 160ms ease;
  transform-origin: bottom;
}

@keyframes msgIn {
  from { opacity: 0; transform: translateY(6px) scale(.995); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}

/* Subtle button hover */
button {
  transition: transform 120ms ease, filter 120ms ease, opacity 120ms ease;
}
button:hover {
  transform: translateY(-1px);
  filter: brightness(1.05);
}
button:active {
  transform: translateY(0);
  opacity: 0.95;
}

/* Optional: nicer scrolling bar on messages */
#messages.messages::-webkit-scrollbar {
  width: 10px;
}
#messages.messages::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.12);
  border-radius: 20px;
}
#messages.messages::-webkit-scrollbar-track {
  background: rgba(0,0,0,0.2);
}

/* Responsive */
@media (max-width: 640px) {
  #chat-screen { border-radius: 0; }
  #announcementsBox { margin: 8px 10px 0 10px; }
  #messages.messages { margin: 8px 10px; }
  #chat-input { padding: 10px; gap: 8px; }
}
/* =========================
   HARD FIX: STOP INVISIBLE OVERLAYS
   Paste at VERY bottom of style.css
   ========================= */

/* 1) Any screen that isn't active must not catch clicks */
.screen {
  pointer-events: none !important;
}

.screen.active {
  pointer-events: auto !important;
}

/* 2) Make sure old legacy full-screen containers can't overlay */
#name-screen,
#waiting-screen {
  position: relative !important;
  inset: auto !important;
  width: 100% !important;
  height: auto !important;
}

/* 3) TRUE FULLSCREEN CHAT (remove the boxing) */
#chat-screen {
  width: 100% !important;
  max-width: none !important;   /* KILLS the 1100px box */
  margin: 0 !important;         /* KILLS centering */
  border-radius: 0 !important;  /* fullscreen edge-to-edge */
  height: 100vh !important;
  overflow: hidden !important;
  align-items: stretch !important; /* IMPORTANT: stop centering */
  justify-content: flex-start !important;
}

/* 4) Messages should be the only scroll area */
#messages,
#messages.messages {
  flex: 1 1 auto !important;
  min-height: 0 !important;
  overflow-y: auto !important;
}

/* 5) Kill accidental overlays from pseudo elements */
body::before,
body::after {
  pointer-events: none !important;
}

/* ============================
   SecureText Premium Pack v2
   - Fixes black screen by ensuring FX canvas is transparent and cleared
   - Adds toasts + HUD + ambient pulses
   ============================ */

#premiumBg{
  position:fixed;
  inset:0;
  z-index:-2;
  overflow:hidden;
  background:
    radial-gradient(1200px 700px at 12% 10%, rgba(80,140,255,.14), transparent 60%),
    radial-gradient(900px 650px at 88% 18%, rgba(255,0,130,.10), transparent 55%),
    radial-gradient(900px 700px at 50% 92%, rgba(60,255,160,.08), transparent 60%),
    linear-gradient(180deg, #070a0f, #05070b);
}

.bg-glow{
  position:absolute;
  width:680px;
  height:680px;
  border-radius:50%;
  filter: blur(110px);
  opacity:.40;
  transform: translate3d(0,0,0);
  animation: stGlowFloat 16s ease-in-out infinite alternate;
  mix-blend-mode: screen;
  pointer-events:none;
}
.bg-glow.glow-1{ background: rgba(80,140,255,.75); top:-220px; left:-220px; }
.bg-glow.glow-2{ background: rgba(60,255,160,.60); top:10%; right:-280px; animation-duration: 18s; }
.bg-glow.glow-3{ background: rgba(255,120,160,.40); bottom:-320px; left:25%; animation-duration: 20s; }

@keyframes stGlowFloat{
  from{ transform: translate3d(-18px,-12px,0) scale(1); }
  to{ transform: translate3d(22px,18px,0) scale(1.05); }
}

.bg-noise{
  position:absolute;
  inset:0;
  opacity:.09;
  pointer-events:none;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
  background-size: 180px 180px;
  mix-blend-mode: overlay;
}

.bg-vignette{
  position:absolute;
  inset:0;
  pointer-events:none;
  background: radial-gradient(1200px 700px at 50% 35%, rgba(0,0,0,0), rgba(0,0,0,.55));
}

#cursorGlow{
  position:fixed;
  width:320px;
  height:320px;
  border-radius:50%;
  pointer-events:none;
  opacity:0;
  transform: translate(-50%,-50%);
  background:
    radial-gradient(circle at 35% 35%, rgba(60,255,160,.22), transparent 60%),
    radial-gradient(circle at 60% 40%, rgba(80,140,255,.20), transparent 60%),
    radial-gradient(circle at 50% 60%, rgba(255,120,160,.10), transparent 60%);
  filter: blur(14px);
  mix-blend-mode: screen;
  transition: opacity .18s ease;
  z-index:-1;
}

/* Transparent FX canvas (NO black fill) */
.fx-burst-canvas{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index: 6; /* above bg, below modals typically */
  background: transparent !important;
}

/* Ambient pulse layer (event-only) */
#ambientPulseLayer{
  position:absolute;
  inset:0;
  pointer-events:none;
}
.ambient-pulse{
  position:absolute;
  left:50%;
  top:45%;
  width:720px;
  height:720px;
  transform: translate(-50%,-50%) scale(1);
  filter: blur(48px);
  animation: stAmbient .85s ease-out forwards;
  opacity:.24;
}
@keyframes stAmbient{
  0%{ transform: translate(-50%,-50%) scale(.98); opacity:.0; }
  40%{ transform: translate(-50%,-50%) scale(1.04); opacity:.28; }
  100%{ transform: translate(-50%,-50%) scale(1.08); opacity:0; }
}

/* Cinematic screen transitions */
.screen{
  transition: opacity .28s ease, transform .28s ease, filter .28s ease;
  will-change: opacity, transform, filter;
}
.screen:not(.active){
  opacity:0;
  transform: translateY(10px) scale(.992);
  filter: blur(6px);
  pointer-events:none;
}
.screen.active{
  opacity:1;
  transform: translateY(0) scale(1);
  filter: blur(0);
}

/* Premium message hover (safe) */
.msg{
  transition: transform .14s ease, box-shadow .14s ease, border-color .14s ease;
}
.msg:hover{
  transform: translateY(-2px);
  box-shadow: 0 18px 45px rgba(0,0,0,.40);
  border-color: rgba(255,255,255,.14);
}

/* Toasts */
.toast-container{
  position:fixed;
  bottom:18px;
  right:18px;
  display:flex;
  flex-direction:column;
  gap:10px;
  z-index: 999999;
}
.toast{
  padding: 12px 14px;
  border-radius: 12px;
  background: rgba(18,18,18,.85);
  border: 1px solid rgba(255,255,255,.12);
  color: rgba(255,255,255,.92);
  backdrop-filter: blur(12px);
  box-shadow: 0 20px 60px rgba(0,0,0,.55);
  transform: translateX(18px);
  opacity: 0;
  animation: toastIn .20s ease forwards;
  max-width: min(360px, 86vw);
  font-weight: 650;
  letter-spacing: .01em;
}
.toast.out{
  animation: toastOut .22s ease forwards;
}
.toast.good{ border-color: rgba(60,255,160,.22); }
.toast.warn{ border-color: rgba(255,211,107,.22); }
.toast.info{ border-color: rgba(80,140,255,.22); }
@keyframes toastIn{ to{ transform: translateX(0); opacity: 1; } }
@keyframes toastOut{ to{ transform: translateX(18px); opacity: 0; } }

/* HUD */
.st-hud{
  position:absolute;
  top:10px;
  right:12px;
  display:flex;
  justify-content:space-between;
  gap:12px;
  align-items:center;
  pointer-events:none; /* stays purely informational */
}
.hud-left, .hud-right{ display:flex; gap:10px; align-items:center; }
.hud-chip{
  padding: 6px 10px;
  border-radius: 999px;
  background: rgba(0,0,0,.22);
  border: 1px solid rgba(255,255,255,.12);
  color: rgba(255,255,255,.86);
  font-size: 12px;
  letter-spacing:.02em;
  backdrop-filter: blur(10px);
}
.hud-soft{ opacity:.85; }
.hud-badge{
  display:flex;
  gap:8px;
  align-items:center;
  padding: 6px 10px;
  border-radius: 999px;
  background: rgba(0,0,0,.18);
  border: 1px solid rgba(255,255,255,.12);
  backdrop-filter: blur(10px);
}
.hud-badge .dot{
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: rgba(60,255,160,.92);
  box-shadow: 0 0 18px rgba(60,255,160,.18);
  animation: stDotPulse 1.8s ease-in-out infinite;
}
@keyframes stDotPulse{
  0%,100%{ transform: scale(1); opacity:.75; }
  50%{ transform: scale(1.25); opacity: 1; }
}
.hud-badge .txt{ font-weight: 800; letter-spacing:.05em; }

/* Cursor glow OFF in chat */
#screen-chat.active #cursorGlow{ opacity:0 !important; }
